<%- include('../includes/head.ejs') %>
<link rel="stylesheet" href="/css/cart.css">
</head>

<body>
    <%- include('../includes/navigation.ejs') %>
    <main>
        <div class="cart-container">
            <% if (products.length > 0) { %>
                <h1>My Cart</h1>
            <ul class="cart-list">
                <% products.forEach((p) => { %>
                <li>
                    <form action="/cart-delete-item" method="POST">
                        <input type="hidden" name="productId" value="<%= p.productData.id %>">
                        <button class="btn" type="submit">Delete</button>
                    </form>
                    <p><%= p.productData.title %></p>
                    <p>(<%= p.qty %>) x $<%= p.productData.price %> </p>
                    <p class="product__price">$
                        <%= p.subtotal %>
                    </p>
                </li>
                <% }) %>
            </ul>
            <p class="total">Total Price: $ <%= totalPrice %></p>
            <% } else { %>
            <h1>No Products in Cart</h1>
            <% } %>
        </div>
    </main>
    <%- include('../includes/end.ejs') %>